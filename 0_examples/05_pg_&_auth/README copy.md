# RDB and Authentication. It use PostgreSQL to have user table.

It has postgres connection to have user table for authentication.

The user table's schema is as below.

```sql
CREATE TABLE public."user"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name text COLLATE pg_catalog."default",
    email text COLLATE pg_catalog."default",
    password text COLLATE pg_catalog."default",
    CONSTRAINT user_pkey PRIMARY KEY (id)
)
```

This example supposes the JWT token exist in authorization header.
If you test it, please set the JWT token by manual.
Please see `9_check/request.http`.

## How to use

### Before try it, please install packages at the root of this project.

```bash
cd /path/to/this_project_root
yarn install

# or

npm install
```

### Start

```bash
node ./app.js
```

### Check

Please access [http://localhost:4000](http://localhost:4000)

1. Create new user

- Query

  ```graphql
  mutation createUser {
    signup(user: { name: "xxx", email: "xxx@yyy.zzz", password: "xxx" }) {
      user {
        name
        id
        email
      }
      token
    }
  }
  ```

- Result

  ```json
  {
    "data": {
      "signup": {
        "user": {
          "name": "saku",
          "id": "5",
          "email": "saku@emantle.net"
        },
        "token": "xxx.xxx.xxx-xxx" //JWT
      }
    }
  }
  ```
